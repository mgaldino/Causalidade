<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 6 Variáveis Instrumentais | Curso de Inferência Causal</title>
  <meta name="description" content="Capítulo 6 Variáveis Instrumentais | Curso de Inferência Causal" />
  <meta name="generator" content="bookdown 0.41 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 6 Variáveis Instrumentais | Curso de Inferência Causal" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 6 Variáveis Instrumentais | Curso de Inferência Causal" />
  
  
  

<meta name="author" content="Manoel Galdino" />


<meta name="date" content="2025-05-07" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="propensity-score-e-matching.html"/>
<link rel="next" href="desenho-de-regresão-discontínua.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Causalidade</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introdução</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#revisão-de-regressão"><i class="fa fa-check"></i><b>1.1</b> Revisão de Regressão</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="index.html"><a href="index.html#teorema-da-anatomia-da-regressão"><i class="fa fa-check"></i><b>1.1.1</b> Teorema da Anatomia da Regressão</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#inferência"><i class="fa fa-check"></i><b>1.2</b> Inferência</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#referências"><i class="fa fa-check"></i><b>1.3</b> Referências</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="resultados-potenciais.html"><a href="resultados-potenciais.html"><i class="fa fa-check"></i><b>2</b> Resultados Potenciais</a>
<ul>
<li class="chapter" data-level="2.1" data-path="resultados-potenciais.html"><a href="resultados-potenciais.html#causalidade-e-o-método-comparativo"><i class="fa fa-check"></i><b>2.1</b> Causalidade e o Método Comparativo</a></li>
<li class="chapter" data-level="2.2" data-path="resultados-potenciais.html"><a href="resultados-potenciais.html#potential-outcomes"><i class="fa fa-check"></i><b>2.2</b> Potential Outcomes</a></li>
<li class="chapter" data-level="2.3" data-path="resultados-potenciais.html"><a href="resultados-potenciais.html#notação"><i class="fa fa-check"></i><b>2.3</b> Notação</a></li>
<li class="chapter" data-level="2.4" data-path="resultados-potenciais.html"><a href="resultados-potenciais.html#problema-fundamental-da-inferência-causal"><i class="fa fa-check"></i><b>2.4</b> Problema Fundamental da Inferência Causal</a></li>
<li class="chapter" data-level="2.5" data-path="resultados-potenciais.html"><a href="resultados-potenciais.html#estimando"><i class="fa fa-check"></i><b>2.5</b> Estimando</a></li>
<li class="chapter" data-level="2.6" data-path="resultados-potenciais.html"><a href="resultados-potenciais.html#estimandos-mais-comuns"><i class="fa fa-check"></i><b>2.6</b> Estimandos Mais Comuns</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="resultados-potenciais.html"><a href="resultados-potenciais.html#ate"><i class="fa fa-check"></i><b>2.6.1</b> ATE</a></li>
<li class="chapter" data-level="2.6.2" data-path="resultados-potenciais.html"><a href="resultados-potenciais.html#att"><i class="fa fa-check"></i><b>2.6.2</b> ATT</a></li>
<li class="chapter" data-level="2.6.3" data-path="resultados-potenciais.html"><a href="resultados-potenciais.html#cate"><i class="fa fa-check"></i><b>2.6.3</b> CATE</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="resultados-potenciais.html"><a href="resultados-potenciais.html#nota-sobre-estimandos"><i class="fa fa-check"></i><b>2.7</b> Nota sobre estimandos</a></li>
<li class="chapter" data-level="2.8" data-path="resultados-potenciais.html"><a href="resultados-potenciais.html#exercício---qual-o-estimando-e-o-estimador-se-possível"><i class="fa fa-check"></i><b>2.8</b> Exercício - Qual o estimando e o estimador (se possível)?</a></li>
<li class="chapter" data-level="2.9" data-path="resultados-potenciais.html"><a href="resultados-potenciais.html#identificação"><i class="fa fa-check"></i><b>2.9</b> Identificação</a></li>
<li class="chapter" data-level="2.10" data-path="resultados-potenciais.html"><a href="resultados-potenciais.html#identificação-do-ate"><i class="fa fa-check"></i><b>2.10</b> Identificação do ATE</a></li>
<li class="chapter" data-level="2.11" data-path="resultados-potenciais.html"><a href="resultados-potenciais.html#equações-estruturais"><i class="fa fa-check"></i><b>2.11</b> Equações estruturais</a></li>
<li class="chapter" data-level="2.12" data-path="resultados-potenciais.html"><a href="resultados-potenciais.html#modelo-versus-desenho"><i class="fa fa-check"></i><b>2.12</b> Modelo versus Desenho</a></li>
<li class="chapter" data-level="2.13" data-path="resultados-potenciais.html"><a href="resultados-potenciais.html#exercício-em-sala"><i class="fa fa-check"></i><b>2.13</b> Exercício em sala</a></li>
<li class="chapter" data-level="2.14" data-path="resultados-potenciais.html"><a href="resultados-potenciais.html#referências-1"><i class="fa fa-check"></i><b>2.14</b> Referências</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="dags.html"><a href="dags.html"><i class="fa fa-check"></i><b>3</b> DAGs</a>
<ul>
<li class="chapter" data-level="3.1" data-path="dags.html"><a href="dags.html#causalidade"><i class="fa fa-check"></i><b>3.1</b> Causalidade</a></li>
<li class="chapter" data-level="3.2" data-path="dags.html"><a href="dags.html#introdução-1"><i class="fa fa-check"></i><b>3.2</b> Introdução</a></li>
<li class="chapter" data-level="3.3" data-path="dags.html"><a href="dags.html#os-tipos-básicos-de-dags"><i class="fa fa-check"></i><b>3.3</b> Os Tipos Básicos de DAGs</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="dags.html"><a href="dags.html#chains"><i class="fa fa-check"></i><b>3.3.1</b> 1. Chains</a></li>
<li class="chapter" data-level="3.3.2" data-path="dags.html"><a href="dags.html#forks"><i class="fa fa-check"></i><b>3.3.2</b> 2. Forks</a></li>
<li class="chapter" data-level="3.3.3" data-path="dags.html"><a href="dags.html#colliders"><i class="fa fa-check"></i><b>3.3.3</b> 3. Colliders</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="dags.html"><a href="dags.html#simulação-no-r-ilustrando-o-collider-bias"><i class="fa fa-check"></i><b>3.4</b> Simulação no R: Ilustrando o Collider Bias</a></li>
<li class="chapter" data-level="3.5" data-path="dags.html"><a href="dags.html#definições"><i class="fa fa-check"></i><b>3.5</b> Definições</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="dags.html"><a href="dags.html#relações-entre-variáveis-nós"><i class="fa fa-check"></i><b>3.5.1</b> Relações entre Variáveis (nós):</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="dags.html"><a href="dags.html#controle-e-ajuste"><i class="fa fa-check"></i><b>3.6</b> Controle e Ajuste</a></li>
<li class="chapter" data-level="3.7" data-path="dags.html"><a href="dags.html#fatorização-da-probabilidade-conjunta"><i class="fa fa-check"></i><b>3.7</b> Fatorização da Probabilidade Conjunta</a></li>
<li class="chapter" data-level="3.8" data-path="dags.html"><a href="dags.html#fatorização-e-dags"><i class="fa fa-check"></i><b>3.8</b> Fatorização e DAGs</a></li>
<li class="chapter" data-level="3.9" data-path="dags.html"><a href="dags.html#fatorização-dags-e-causalidade"><i class="fa fa-check"></i><b>3.9</b> Fatorização, DAGs e Causalidade</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="experimentos.html"><a href="experimentos.html"><i class="fa fa-check"></i><b>4</b> Experimentos</a>
<ul>
<li class="chapter" data-level="4.1" data-path="experimentos.html"><a href="experimentos.html#introdução-2"><i class="fa fa-check"></i><b>4.1</b> Introdução</a></li>
<li class="chapter" data-level="4.2" data-path="experimentos.html"><a href="experimentos.html#experimentos-aleatórios"><i class="fa fa-check"></i><b>4.2</b> Experimentos aleatórios</a></li>
<li class="chapter" data-level="4.3" data-path="experimentos.html"><a href="experimentos.html#restrição-de-exclusão"><i class="fa fa-check"></i><b>4.3</b> Restrição de Exclusão</a></li>
<li class="chapter" data-level="4.4" data-path="experimentos.html"><a href="experimentos.html#tipos-de-experimentos"><i class="fa fa-check"></i><b>4.4</b> Tipos de experimentos</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="experimentos.html"><a href="experimentos.html#aleatorização-de-bernoulli"><i class="fa fa-check"></i><b>4.4.1</b> Aleatorização de Bernoulli</a></li>
<li class="chapter" data-level="4.4.2" data-path="experimentos.html"><a href="experimentos.html#aleatorização-completa"><i class="fa fa-check"></i><b>4.4.2</b> Aleatorização Completa</a></li>
<li class="chapter" data-level="4.4.3" data-path="experimentos.html"><a href="experimentos.html#aleatorização-condicional-block-random-assigment"><i class="fa fa-check"></i><b>4.4.3</b> Aleatorização Condicional (Block Random Assigment)</a></li>
<li class="chapter" data-level="4.4.4" data-path="experimentos.html"><a href="experimentos.html#pensando-aleatorização-em-bloco"><i class="fa fa-check"></i><b>4.4.4</b> Pensando aleatorização em bloco</a></li>
<li class="chapter" data-level="4.4.5" data-path="experimentos.html"><a href="experimentos.html#ate-com-aleatorização-condicional-bloco"><i class="fa fa-check"></i><b>4.4.5</b> ATE com Aleatorização Condicional (Bloco)</a></li>
<li class="chapter" data-level="4.4.6" data-path="experimentos.html"><a href="experimentos.html#aleatorização-em-bloco"><i class="fa fa-check"></i><b>4.4.6</b> Aleatorização em bloco</a></li>
<li class="chapter" data-level="4.4.7" data-path="experimentos.html"><a href="experimentos.html#precisão-da-aleatorização-em-bloco"><i class="fa fa-check"></i><b>4.4.7</b> Precisão da aleatorização em bloco</a></li>
<li class="chapter" data-level="4.4.8" data-path="experimentos.html"><a href="experimentos.html#comparação-de-ses"><i class="fa fa-check"></i><b>4.4.8</b> Comparação de SEs</a></li>
<li class="chapter" data-level="4.4.9" data-path="experimentos.html"><a href="experimentos.html#cluster-randomization"><i class="fa fa-check"></i><b>4.4.9</b> Cluster randomization</a></li>
<li class="chapter" data-level="4.4.10" data-path="experimentos.html"><a href="experimentos.html#tabelas-em-artigos"><i class="fa fa-check"></i><b>4.4.10</b> Tabelas em artigos</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="experimentos.html"><a href="experimentos.html#estimador-ate"><i class="fa fa-check"></i><b>4.5</b> Estimador ATE</a></li>
<li class="chapter" data-level="4.6" data-path="experimentos.html"><a href="experimentos.html#key-takeways"><i class="fa fa-check"></i><b>4.6</b> Key Takeways</a></li>
<li class="chapter" data-level="4.7" data-path="experimentos.html"><a href="experimentos.html#declare-design"><i class="fa fa-check"></i><b>4.7</b> Declare Design</a></li>
<li class="chapter" data-level="4.8" data-path="experimentos.html"><a href="experimentos.html#exercício"><i class="fa fa-check"></i><b>4.8</b> Exercício</a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="experimentos.html"><a href="experimentos.html#experimento-com-envio-de-cartões-postais-e-participação-eleitoral"><i class="fa fa-check"></i><b>4.8.1</b> Experimento com envio de cartões-postais e participação eleitoral</a></li>
<li class="chapter" data-level="4.8.2" data-path="experimentos.html"><a href="experimentos.html#experimento-com-anúncios-de-tv-e-participação-eleitoral"><i class="fa fa-check"></i><b>4.8.2</b> Experimento com anúncios de TV e participação eleitoral</a></li>
<li class="chapter" data-level="4.8.3" data-path="experimentos.html"><a href="experimentos.html#exclusão-de-participantes-em-experimentos-de-survey"><i class="fa fa-check"></i><b>4.8.3</b> Exclusão de participantes em experimentos de survey</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="propensity-score-e-matching.html"><a href="propensity-score-e-matching.html"><i class="fa fa-check"></i><b>5</b> Propensity Score e Matching</a>
<ul>
<li class="chapter" data-level="5.1" data-path="propensity-score-e-matching.html"><a href="propensity-score-e-matching.html#introdução-3"><i class="fa fa-check"></i><b>5.1</b> Introdução</a></li>
<li class="chapter" data-level="5.2" data-path="propensity-score-e-matching.html"><a href="propensity-score-e-matching.html#propensity-score"><i class="fa fa-check"></i><b>5.2</b> Propensity Score</a></li>
<li class="chapter" data-level="5.3" data-path="propensity-score-e-matching.html"><a href="propensity-score-e-matching.html#matching"><i class="fa fa-check"></i><b>5.3</b> Matching</a></li>
<li class="chapter" data-level="5.4" data-path="propensity-score-e-matching.html"><a href="propensity-score-e-matching.html#suposições-de-identificação"><i class="fa fa-check"></i><b>5.4</b> Suposições de identificação</a></li>
<li class="chapter" data-level="5.5" data-path="propensity-score-e-matching.html"><a href="propensity-score-e-matching.html#matching-1"><i class="fa fa-check"></i><b>5.5</b> Matching</a></li>
<li class="chapter" data-level="5.6" data-path="propensity-score-e-matching.html"><a href="propensity-score-e-matching.html#matching-exato"><i class="fa fa-check"></i><b>5.6</b> Matching exato</a></li>
<li class="chapter" data-level="5.7" data-path="propensity-score-e-matching.html"><a href="propensity-score-e-matching.html#matching-aproximado"><i class="fa fa-check"></i><b>5.7</b> Matching aproximado</a></li>
<li class="chapter" data-level="5.8" data-path="propensity-score-e-matching.html"><a href="propensity-score-e-matching.html#estimando-1"><i class="fa fa-check"></i><b>5.8</b> Estimando</a></li>
<li class="chapter" data-level="5.9" data-path="propensity-score-e-matching.html"><a href="propensity-score-e-matching.html#declare-design-e-matching"><i class="fa fa-check"></i><b>5.9</b> Declare Design e Matching</a>
<ul>
<li class="chapter" data-level="5.9.1" data-path="propensity-score-e-matching.html"><a href="propensity-score-e-matching.html#matching-e-propensity-scores"><i class="fa fa-check"></i><b>5.9.1</b> Matching e Propensity scores</a></li>
</ul></li>
<li class="chapter" data-level="5.10" data-path="propensity-score-e-matching.html"><a href="propensity-score-e-matching.html#recomendações-práticas-sobre-matching"><i class="fa fa-check"></i><b>5.10</b> Recomendações Práticas sobre Matching</a></li>
<li class="chapter" data-level="5.11" data-path="propensity-score-e-matching.html"><a href="propensity-score-e-matching.html#referências-2"><i class="fa fa-check"></i><b>5.11</b> Referências</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="variáveis-instrumentais.html"><a href="variáveis-instrumentais.html"><i class="fa fa-check"></i><b>6</b> Variáveis Instrumentais</a>
<ul>
<li class="chapter" data-level="6.1" data-path="variáveis-instrumentais.html"><a href="variáveis-instrumentais.html#introdução-4"><i class="fa fa-check"></i><b>6.1</b> Introdução</a></li>
<li class="chapter" data-level="6.2" data-path="variáveis-instrumentais.html"><a href="variáveis-instrumentais.html#iv-com-modelo-estrutural"><i class="fa fa-check"></i><b>6.2</b> IV com modelo estrutural</a></li>
<li class="chapter" data-level="6.3" data-path="variáveis-instrumentais.html"><a href="variáveis-instrumentais.html#mqo-em-2-estágios"><i class="fa fa-check"></i><b>6.3</b> MQO em 2 Estágios</a></li>
<li class="chapter" data-level="6.4" data-path="variáveis-instrumentais.html"><a href="variáveis-instrumentais.html#principais-usos-de-iv"><i class="fa fa-check"></i><b>6.4</b> Principais usos de IV</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="variáveis-instrumentais.html"><a href="variáveis-instrumentais.html#experimentos-1"><i class="fa fa-check"></i><b>6.4.1</b> Experimentos</a></li>
<li class="chapter" data-level="6.4.2" data-path="variáveis-instrumentais.html"><a href="variáveis-instrumentais.html#regras-com-variação-quasi-aleatória"><i class="fa fa-check"></i><b>6.4.2</b> Regras com variação quasi-aleatória</a></li>
<li class="chapter" data-level="6.4.3" data-path="variáveis-instrumentais.html"><a href="variáveis-instrumentais.html#teoria"><i class="fa fa-check"></i><b>6.4.3</b> Teoria</a></li>
<li class="chapter" data-level="6.4.4" data-path="variáveis-instrumentais.html"><a href="variáveis-instrumentais.html#suposições-para-estimar-o-late"><i class="fa fa-check"></i><b>6.4.4</b> Suposições para estimar o LATE</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="variáveis-instrumentais.html"><a href="variáveis-instrumentais.html#restrição-de-exclusão-1"><i class="fa fa-check"></i><b>6.5</b> Restrição de Exclusão</a></li>
<li class="chapter" data-level="6.6" data-path="variáveis-instrumentais.html"><a href="variáveis-instrumentais.html#monoticidade"><i class="fa fa-check"></i><b>6.6</b> Monoticidade</a></li>
<li class="chapter" data-level="6.7" data-path="variáveis-instrumentais.html"><a href="variáveis-instrumentais.html#estimação-aka-estatística-f"><i class="fa fa-check"></i><b>6.7</b> Estimação (aka estatística F)</a>
<ul>
<li class="chapter" data-level="6.7.1" data-path="variáveis-instrumentais.html"><a href="variáveis-instrumentais.html#f-stat"><i class="fa fa-check"></i><b>6.7.1</b> F stat</a></li>
</ul></li>
<li class="chapter" data-level="6.8" data-path="variáveis-instrumentais.html"><a href="variáveis-instrumentais.html#referências-3"><i class="fa fa-check"></i><b>6.8</b> Referências</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html"><i class="fa fa-check"></i><b>7</b> Desenho de Regresão Discontínua</a>
<ul>
<li class="chapter" data-level="7.1" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#outline-da-aula"><i class="fa fa-check"></i><b>7.1</b> Outline da aula</a></li>
<li class="chapter" data-level="7.2" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#características-chave-da-rdd"><i class="fa fa-check"></i><b>7.2</b> Características-chave da RDD</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#determinação-do-tratamento"><i class="fa fa-check"></i><b>7.2.1</b> Determinação do Tratamento</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#fuzzy-rdd"><i class="fa fa-check"></i><b>7.3</b> Fuzzy RDD</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#observação-e-corte"><i class="fa fa-check"></i><b>7.3.1</b> Observação e Corte</a></li>
<li class="chapter" data-level="7.3.2" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#estimativa-dos-efeitos-do-tratamento"><i class="fa fa-check"></i><b>7.3.2</b> Estimativa dos Efeitos do Tratamento</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#suposição-de-continuidade"><i class="fa fa-check"></i><b>7.4</b> Suposição de continuidade</a></li>
<li class="chapter" data-level="7.5" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#suposições-na-rdd"><i class="fa fa-check"></i><b>7.5</b> Suposições na RDD</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#suposição-de-não-manipulação-com-precisão"><i class="fa fa-check"></i><b>7.5.1</b> Suposição de Não-manipulação com Precisão</a></li>
<li class="chapter" data-level="7.5.2" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#problemas-de-manipulação"><i class="fa fa-check"></i><b>7.5.2</b> Problemas de Manipulação</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#testabilidade-da-suposição-de-não-manipulação"><i class="fa fa-check"></i><b>7.6</b> Testabilidade da Suposição de não-Manipulação</a></li>
<li class="chapter" data-level="7.7" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#estimação-em-rdd"><i class="fa fa-check"></i><b>7.7</b> Estimação em RDD</a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#problema-de-complete-overlapping"><i class="fa fa-check"></i><b>7.7.1</b> Problema de Complete Overlapping</a></li>
<li class="chapter" data-level="7.7.2" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#dependência-de-extrapolação"><i class="fa fa-check"></i><b>7.7.2</b> Dependência de Extrapolação</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#métodos-de-estimação"><i class="fa fa-check"></i><b>7.8</b> Métodos de Estimação</a>
<ul>
<li class="chapter" data-level="7.8.1" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#identificação-no-limite"><i class="fa fa-check"></i><b>7.8.1</b> Identificação no Limite</a></li>
</ul></li>
<li class="chapter" data-level="7.9" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#trade-off-de-viés-variância"><i class="fa fa-check"></i><b>7.9</b> Trade-off de Viés-Variância</a>
<ul>
<li class="chapter" data-level="7.9.1" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#métodos-de-largura-de-banda-ótima"><i class="fa fa-check"></i><b>7.9.1</b> Métodos de Largura de Banda Ótima</a></li>
</ul></li>
<li class="chapter" data-level="7.10" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#regras-arbitrárias"><i class="fa fa-check"></i><b>7.10</b> Regras arbitrárias</a></li>
<li class="chapter" data-level="7.11" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#simulação"><i class="fa fa-check"></i><b>7.11</b> Simulação</a></li>
<li class="chapter" data-level="7.12" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#simulação---potential-outcomes-y0"><i class="fa fa-check"></i><b>7.12</b> Simulação - Potential Outcomes Y0</a></li>
<li class="chapter" data-level="7.13" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#simulação---potential-outcomes-y1"><i class="fa fa-check"></i><b>7.13</b> Simulação - Potential Outcomes Y1</a></li>
<li class="chapter" data-level="7.14" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#simulação---potential-outcomes-y1-e-y0"><i class="fa fa-check"></i><b>7.14</b> Simulação - Potential Outcomes Y1 e Y0</a></li>
<li class="chapter" data-level="7.15" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#simulação---y-observado"><i class="fa fa-check"></i><b>7.15</b> Simulação - Y observado</a></li>
<li class="chapter" data-level="7.16" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#quando-o-rdd-funciona"><i class="fa fa-check"></i><b>7.16</b> Quando o RDD funciona?</a></li>
<li class="chapter" data-level="7.17" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#raw-data-versus-bin"><i class="fa fa-check"></i><b>7.17</b> Raw Data versus Bin</a></li>
<li class="chapter" data-level="7.18" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#permutation-tests-balancing"><i class="fa fa-check"></i><b>7.18</b> Permutation tests (balancing)</a></li>
<li class="chapter" data-level="7.19" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#mccray-test"><i class="fa fa-check"></i><b>7.19</b> McCray test</a></li>
<li class="chapter" data-level="7.20" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#robustez"><i class="fa fa-check"></i><b>7.20</b> Robustez</a></li>
<li class="chapter" data-level="7.21" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#densidade-descontínua---results"><i class="fa fa-check"></i><b>7.21</b> Densidade descontínua - results</a></li>
<li class="chapter" data-level="7.22" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#regressão-rdd"><i class="fa fa-check"></i><b>7.22</b> Regressão RDD</a></li>
<li class="chapter" data-level="7.23" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#placebo-tests"><i class="fa fa-check"></i><b>7.23</b> Placebo Tests</a></li>
<li class="chapter" data-level="7.24" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#pcrd"><i class="fa fa-check"></i><b>7.24</b> PCRD</a></li>
<li class="chapter" data-level="7.25" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#checlist-para-um-paper"><i class="fa fa-check"></i><b>7.25</b> Checlist para um paper</a></li>
<li class="chapter" data-level="7.26" data-path="desenho-de-regresão-discontínua.html"><a href="desenho-de-regresão-discontínua.html#referências-4"><i class="fa fa-check"></i><b>7.26</b> Referências</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="diferença-em-diferenças.html"><a href="diferença-em-diferenças.html"><i class="fa fa-check"></i><b>8</b> Diferença em Diferenças</a></li>
<li class="chapter" data-level="9" data-path="synthetic-control.html"><a href="synthetic-control.html"><i class="fa fa-check"></i><b>9</b> Synthetic Control</a>
<ul>
<li class="chapter" data-level="9.1" data-path="synthetic-control.html"><a href="synthetic-control.html#implementação-no-r"><i class="fa fa-check"></i><b>9.1</b> Implementação no R</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="interferência-spillover-e-dinâmica.html"><a href="interferência-spillover-e-dinâmica.html"><i class="fa fa-check"></i><b>10</b> Interferência, spillover e dinâmica</a>
<ul>
<li class="chapter" data-level="10.1" data-path="interferência-spillover-e-dinâmica.html"><a href="interferência-spillover-e-dinâmica.html#suposições-simplifcadoras"><i class="fa fa-check"></i><b>10.1</b> Suposições simplifcadoras</a></li>
<li class="chapter" data-level="10.2" data-path="interferência-spillover-e-dinâmica.html"><a href="interferência-spillover-e-dinâmica.html#po-com-tratamento-de-múltiplos-valores-multi-valued"><i class="fa fa-check"></i><b>10.2</b> PO com tratamento de múltiplos valores (multi-valued)</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="interferência-spillover-e-dinâmica.html"><a href="interferência-spillover-e-dinâmica.html#multi-valued-discreto"><i class="fa fa-check"></i><b>10.2.1</b> Multi-valued discreto</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="interferência-spillover-e-dinâmica.html"><a href="interferência-spillover-e-dinâmica.html#dinâmica"><i class="fa fa-check"></i><b>10.3</b> Dinâmica</a></li>
<li class="chapter" data-level="10.4" data-path="interferência-spillover-e-dinâmica.html"><a href="interferência-spillover-e-dinâmica.html#interferência"><i class="fa fa-check"></i><b>10.4</b> Interferência</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Curso de Inferência Causal</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="variáveis-instrumentais" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">Capítulo 6</span> Variáveis Instrumentais<a href="variáveis-instrumentais.html#variáveis-instrumentais" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="introdução-4" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Introdução<a href="variáveis-instrumentais.html#introdução-4" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Considere o seguinte DAG canônico de Variáveis Instrumentais:</p>
<p><img src="bookdownproj_files/figure-html/dag-diagram1-1.png" width="672" /></p>
<p>Nós vemos que o efeito causal do tratamento <span class="math inline">\(T\)</span> é confundido pela variável não observada <span class="math inline">\(U\)</span>, já que temos um <em>backdoor</em> aberto. Porém, a variável <span class="math inline">\(Z\)</span> não tem nenhum caminho aberto para <span class="math inline">\(Y\)</span> exceto via <span class="math inline">\(T\)</span>, isto é, <span class="math inline">\(T\)</span> é um mediador do efeito causal de <span class="math inline">\(Z\)</span>.</p>
<p>Do ponto de vista não paramétrico (DAGs), dizemos que a variável <span class="math inline">\(Z\)</span> é uma <strong>candidata</strong> a variável instrumental (IV) se:</p>
<ol style="list-style-type: decimal">
<li><p><span class="math inline">\(Z\)</span> está conectado a X no grafo original. Condição de <strong>relevância</strong>.</p></li>
<li><p>No grafo em que a seta de <span class="math inline">\(T\)</span> para <span class="math inline">\(y\)</span> é removida, <span class="math inline">\(Z\)</span> é d-separado de <span class="math inline">\(Y\)</span>. <strong>Exclusion Restriction</strong>.</p></li>
<li><p>A variável instrumental <span class="math inline">\(Z\)</span> não compartilha causa comum com <span class="math inline">\(y\)</span>, incluindo, portanto, não ser descendente de <span class="math inline">\(T\)</span>. <strong>Causa comum</strong>.</p></li>
</ol>
<p>Remark: Pode acontecer de ser necessário controlar para uma conjunto de covariáveis <span class="math inline">\(X\)</span> para que a segunda condição seja satisfeita. Chamamos isso de IV condicional.</p>
<p>Remark 2: Dizemos que uma variável <span class="math inline">\(Z\)</span> é <strong>candidata</strong> a ser VI porque as três condições acima, ainda que necessárias, não são suficientes para uma variável ser considerada VI. Veremos mais à frente porque isso acontece e o que mais é necessário para uma variável ser considerada VI.
Considere o DAG abaixo.</p>
<p>Remark 3: A literatura econométrica não costuma deixar muito clara a condição 3. Às vezes falam que <span class="math inline">\(Z\)</span> deve causar <span class="math inline">\(T\)</span> (o que implica que não há causa comum em um DAG). Porém, isso não é correto, como o DAG abaixo mostra, em que, controlando para <span class="math inline">\(V_3\)</span>, que é um collider, induzimos correlação entre <span class="math inline">\(Z\)</span> e <span class="math inline">\(T\)</span> para a condição de relevância ser satisfeita, e <span class="math inline">\(Z\)</span> é uma VI candidata.</p>
<p><img src="bookdownproj_files/figure-html/dag-diagram2-1.png" width="672" /></p>
<p>Do mesmo jeito, se <span class="math inline">\(V_3\)</span> for causa comum de <span class="math inline">\(Z\)</span> e <span class="math inline">\(T\)</span>, não controlar para ela torna a <span class="math inline">\(Z\)</span> admissível como VI.</p>
<p><img src="bookdownproj_files/figure-html/dag-diagram3-1.png" width="672" /></p>
<p>Será que <span class="math inline">\(Z\)</span> pode ser uma IV no DAG abaixo?</p>
<p><img src="bookdownproj_files/figure-html/dag-diagram4-1.png" width="672" /></p>
<p>Vamos verificar as condições. É fácil ver que <span class="math inline">\(Z\)</span> está conectado a <span class="math inline">\(T\)</span>, já que temos dois caminhos abertos, um via <span class="math inline">\(W\)</span> e outro via <span class="math inline">\(L\)</span> (e ainda um via <span class="math inline">\(W\)</span> via <span class="math inline">\(L\)</span>). Portanto, a primeira condição está satisfeita. Note que se eu controlar simultaneamente para <span class="math inline">\(W\)</span> e <span class="math inline">\(L\)</span>, então eu fecho todos os caminhos abertos.</p>
<p>Com relação à segunda condição, Remover a flecha de <span class="math inline">\(T\)</span> para <span class="math inline">\(Y\)</span> é, efetivamente, ter um novo DAG:</p>
<p>Por fim, <span class="math inline">\(Z\)</span> não compartilha causa comum com <span class="math inline">\(Y\)</span>.</p>
<p>Nesse DAG, <span class="math inline">\(Z\)</span> não está d-separado de <span class="math inline">\(Y\)</span>, pois existe um caminho aberto para <span class="math inline">\(Y\)</span> via <span class="math inline">\(L\)</span>. Portanto, controlando para <span class="math inline">\(L\)</span> (mas não <span class="math inline">\(W\)</span>), tenho um instrumento que passa nas duas condições.</p>
</div>
<div id="iv-com-modelo-estrutural" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> IV com modelo estrutural<a href="variáveis-instrumentais.html#iv-com-modelo-estrutural" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><span class="math inline">\(y_i = \beta D_i + \delta_2 U + e_i\)</span>
<span class="math inline">\(D_i = \delta_1 U + \gamma z_i + u_i\)</span></p>
<p>As duas equações são estruturais, no sentido de que representam relações causais.
A restrição de exclusão do tratamento <span class="math inline">\(D_i\)</span> é que <span class="math inline">\(\mathbb{E}[D_i|e_i] = 0\)</span>. Sabemos que não é verdade porque <span class="math inline">\(D_i\)</span> é endógeno, ou seja, há um viés de variável omitida, <span class="math inline">\(U\)</span>. Já a restrição de exclusão da variável instrumental é que <span class="math inline">\(\mathbb{E}[z_i|u_i] = 0\)</span></p>
<p>Vamos supor, para simplificar, que tanto <span class="math inline">\(D_i\)</span> quanto <span class="math inline">\(Z_i\)</span> são binários.</p>
<p>Considere o seguinte exemplo:</p>
<p>Nós sabemos que diferença simples de média identifica o ATE da segunda equação: <span class="math inline">\(\gamma = \frac{\sum_{i=1}^n z_i}{n} - \frac{\sum_{i=1}^n (1-z_i)}{n}\)</span>.</p>
</div>
<div id="mqo-em-2-estágios" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> MQO em 2 Estágios<a href="variáveis-instrumentais.html#mqo-em-2-estágios" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Considere novamente o DAG canônico para IV. Como poderíamos estimar o efeito causal de <span class="math inline">\(T\)</span> sobre <span class="math inline">\(Y\)</span>?</p>
<p>Uma possibilidade é a chamada forma reduzida, que pode ser derivada a partir da suposição de independência. Antes, vamos introduzir uma notação:</p>
<p>A notação <span class="math inline">\(Y^{T=t,Z=z}\)</span> indica o resultado potencial para um nível do tratamento <span class="math inline">\(t\)</span> efetivamente recebido, que pode ser <span class="math inline">\(0\)</span> ou <span class="math inline">\(1\)</span>, e para um nível do <em>treatment assignment</em>, que pode ser <span class="math inline">\(0\)</span> ou <span class="math inline">\(1\)</span>, para um instrumento binário.</p>
<p>E também temos um status potencial do tratamento (em oposição ao tratamento observado): <span class="math inline">\(T^1_i\)</span> é o status do tratamento quando <span class="math inline">\(Z=1\)</span>. Similarmente, <span class="math inline">\(T^0_i\)</span> é o status do tratamento quando <span class="math inline">\(Z=0\)</span>.</p>
<p>E aqui temos uma nova <em>switching equation</em>:</p>
<p><span class="math inline">\(T_i = T^0_i + (T^1_i - T^0_i)Z_i\)</span></p>
<p><span class="math display">\[\begin{align}
   E\big[Y_i\mid Z_i=1\big]-E\big[Y_i\mid Z_i=0\big] &amp; = E\big[Y_i(D_i^1,1)\mid Z_i=1\mid]-
   E\big[Y_i(D_i^0,0)\mid Z_i=0\big]
   \\
                                    &amp; = E[Y_i(D_i^1,1)] - E[Y_i(D_i^0,0)]  
\end{align}\]</span></p>
<p>O estimador é o efeito causal (total) de <span class="math inline">\(Z\)</span> sobre <span class="math inline">\(Y\)</span>. Em um experimento, isso é chamado de <em>intent to treat</em>, pois se a aleatorização é o instrumento, então é o efeito causal da intenção de tratar.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="variáveis-instrumentais.html#cb87-1" tabindex="-1"></a><span class="fu">library</span>(stargazer)</span>
<span id="cb87-2"><a href="variáveis-instrumentais.html#cb87-2" tabindex="-1"></a></span>
<span id="cb87-3"><a href="variáveis-instrumentais.html#cb87-3" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">100000</span></span>
<span id="cb87-4"><a href="variáveis-instrumentais.html#cb87-4" tabindex="-1"></a></span>
<span id="cb87-5"><a href="variáveis-instrumentais.html#cb87-5" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb87-6"><a href="variáveis-instrumentais.html#cb87-6" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n)</span>
<span id="cb87-7"><a href="variáveis-instrumentais.html#cb87-7" tabindex="-1"></a>u <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n, <span class="dv">0</span> , <span class="dv">3</span>)</span>
<span id="cb87-8"><a href="variáveis-instrumentais.html#cb87-8" tabindex="-1"></a>treatment <span class="ot">&lt;-</span> <span class="fu">rbinom</span>(n, <span class="dv">1</span>, <span class="fu">plogis</span>(z <span class="sc">-</span> u <span class="sc">+</span> <span class="fu">rnorm</span>(n, <span class="dv">0</span>, <span class="dv">2</span>)))</span>
<span id="cb87-9"><a href="variáveis-instrumentais.html#cb87-9" tabindex="-1"></a></span>
<span id="cb87-10"><a href="variáveis-instrumentais.html#cb87-10" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">*</span>treatment <span class="sc">+</span> u</span>
<span id="cb87-11"><a href="variáveis-instrumentais.html#cb87-11" tabindex="-1"></a></span>
<span id="cb87-12"><a href="variáveis-instrumentais.html#cb87-12" tabindex="-1"></a>reg_vies <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> treatment)</span>
<span id="cb87-13"><a href="variáveis-instrumentais.html#cb87-13" tabindex="-1"></a><span class="fu">summary</span>(reg_vies)</span></code></pre></div>
<p>Call:
lm(formula = y ~ treatment)</p>
<p>Residuals:
Min 1Q Median 3Q Max
-11.4112 -1.6433 0.0048 1.6470 10.8586</p>
<p>Coefficients:
Estimate Std. Error t value Pr(&gt;|t|)<br />
(Intercept) 1.75964 0.01096 160.56 &lt;2e-16 <strong><em>
treatment -1.49476 0.01551 -96.35 &lt;2e-16 </em></strong>
—
Signif. codes: 0 ‘<em><strong>’ 0.001 ’</strong>’ 0.01 ’</em>’ 0.05 ‘.’ 0.1 ’ ’ 1</p>
<p>Residual standard error: 2.453 on 99998 degrees of freedom
Multiple R-squared: 0.08495, Adjusted R-squared: 0.08494
F-statistic: 9283 on 1 and 99998 DF, p-value: &lt; 2.2e-16</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="variáveis-instrumentais.html#cb88-1" tabindex="-1"></a>reg_1s <span class="ot">&lt;-</span> <span class="fu">lm</span>(treatment <span class="sc">~</span> z)</span>
<span id="cb88-2"><a href="variáveis-instrumentais.html#cb88-2" tabindex="-1"></a>reg_2s <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> <span class="fu">fitted</span>(reg_1s))</span>
<span id="cb88-3"><a href="variáveis-instrumentais.html#cb88-3" tabindex="-1"></a><span class="fu">stargazer</span>(reg_vies, reg_1s, reg_2s, <span class="at">type =</span> <span class="st">&quot;html&quot;</span>,  <span class="at">title=</span><span class="st">&quot;OLS e 2SLS&quot;</span>)</span></code></pre></div>
<table style="text-align:center">
<caption>
<strong>OLS e 2SLS</strong>
</caption>
<tr>
<td colspan="4" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td colspan="3">
<em>Dependent variable:</em>
</td>
</tr>
<tr>
<td>
</td>
<td colspan="3" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
y
</td>
<td>
treatment
</td>
<td>
y
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(1)
</td>
<td>
(2)
</td>
<td>
(3)
</td>
</tr>
<tr>
<td colspan="4" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
treatment
</td>
<td>
-1.495<sup>***</sup>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.016)
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
z
</td>
<td>
</td>
<td>
0.095<sup>***</sup>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
(0.002)
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
fitted(reg_1s)
</td>
<td>
</td>
<td>
</td>
<td>
1.916<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
(0.085)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Constant
</td>
<td>
1.760<sup>***</sup>
</td>
<td>
0.499<sup>***</sup>
</td>
<td>
0.058
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.011)
</td>
<td>
(0.002)
</td>
<td>
(0.043)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td colspan="4" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
Observations
</td>
<td>
100,000
</td>
<td>
100,000
</td>
<td>
100,000
</td>
</tr>
<tr>
<td style="text-align:left">
R<sup>2</sup>
</td>
<td>
0.085
</td>
<td>
0.036
</td>
<td>
0.005
</td>
</tr>
<tr>
<td style="text-align:left">
Adjusted R<sup>2</sup>
</td>
<td>
0.085
</td>
<td>
0.036
</td>
<td>
0.005
</td>
</tr>
<tr>
<td style="text-align:left">
Residual Std. Error (df = 99998)
</td>
<td>
2.453
</td>
<td>
0.491
</td>
<td>
2.558
</td>
</tr>
<tr>
<td style="text-align:left">
F Statistic (df = 1; 99998)
</td>
<td>
9,283.268<sup>***</sup>
</td>
<td>
3,739.184<sup>***</sup>
</td>
<td>
505.426<sup>***</sup>
</td>
</tr>
<tr>
<td colspan="4" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
<em>Note:</em>
</td>
<td colspan="3" style="text-align:right">
<sup><em></sup>p&lt;0.1; <sup><strong></sup>p&lt;0.05; <sup></strong></em></sup>p&lt;0.01
</td>
</tr>
</table>
<p>Uma regra de bolso, baseada em um artigo de Stock &amp; Yogo (2002), diz que a estatística F da regressão do primeiro estágio deve ser maior que 10.</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="variáveis-instrumentais.html#cb89-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
## ✔ dplyr     1.1.4     ✔ readr     2.1.5
## ✔ forcats   1.0.0     ✔ stringr   1.5.1
## ✔ ggplot2   3.5.1     ✔ tibble    3.2.1
## ✔ lubridate 1.9.3     ✔ tidyr     1.3.1
## ✔ purrr     1.0.4     
## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()
## ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="variáveis-instrumentais.html#cb91-1" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb91-2"><a href="variáveis-instrumentais.html#cb91-2" tabindex="-1"></a></span>
<span id="cb91-3"><a href="variáveis-instrumentais.html#cb91-3" tabindex="-1"></a>simulate_and_fit <span class="ot">&lt;-</span> <span class="cf">function</span>(n) {</span>
<span id="cb91-4"><a href="variáveis-instrumentais.html#cb91-4" tabindex="-1"></a>  z <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n)</span>
<span id="cb91-5"><a href="variáveis-instrumentais.html#cb91-5" tabindex="-1"></a>  u <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n, <span class="dv">0</span>, <span class="dv">3</span>)</span>
<span id="cb91-6"><a href="variáveis-instrumentais.html#cb91-6" tabindex="-1"></a>  treatment <span class="ot">&lt;-</span> <span class="fu">rbinom</span>(n, <span class="dv">1</span>, <span class="fu">plogis</span>(z <span class="sc">-</span> u <span class="sc">+</span> <span class="fu">rnorm</span>(n, <span class="dv">0</span>, <span class="dv">2</span>)))</span>
<span id="cb91-7"><a href="variáveis-instrumentais.html#cb91-7" tabindex="-1"></a>  y <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> treatment <span class="sc">+</span> u</span>
<span id="cb91-8"><a href="variáveis-instrumentais.html#cb91-8" tabindex="-1"></a>  </span>
<span id="cb91-9"><a href="variáveis-instrumentais.html#cb91-9" tabindex="-1"></a>  <span class="co"># Naive regression</span></span>
<span id="cb91-10"><a href="variáveis-instrumentais.html#cb91-10" tabindex="-1"></a>  reg_vies <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> treatment)</span>
<span id="cb91-11"><a href="variáveis-instrumentais.html#cb91-11" tabindex="-1"></a>  </span>
<span id="cb91-12"><a href="variáveis-instrumentais.html#cb91-12" tabindex="-1"></a>  <span class="co"># 2SLS</span></span>
<span id="cb91-13"><a href="variáveis-instrumentais.html#cb91-13" tabindex="-1"></a>  reg_1s <span class="ot">&lt;-</span> <span class="fu">lm</span>(treatment <span class="sc">~</span> z)</span>
<span id="cb91-14"><a href="variáveis-instrumentais.html#cb91-14" tabindex="-1"></a>  predicted_treatment <span class="ot">&lt;-</span> <span class="fu">predict</span>(reg_1s)</span>
<span id="cb91-15"><a href="variáveis-instrumentais.html#cb91-15" tabindex="-1"></a>  reg_2s <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> predicted_treatment)</span>
<span id="cb91-16"><a href="variáveis-instrumentais.html#cb91-16" tabindex="-1"></a>  </span>
<span id="cb91-17"><a href="variáveis-instrumentais.html#cb91-17" tabindex="-1"></a>  <span class="co"># Return coefficients</span></span>
<span id="cb91-18"><a href="variáveis-instrumentais.html#cb91-18" tabindex="-1"></a>  <span class="fu">tibble</span>(</span>
<span id="cb91-19"><a href="variáveis-instrumentais.html#cb91-19" tabindex="-1"></a>    <span class="at">naive_coef =</span> <span class="fu">coef</span>(reg_vies)[<span class="dv">2</span>],</span>
<span id="cb91-20"><a href="variáveis-instrumentais.html#cb91-20" tabindex="-1"></a>    <span class="at">tsls_coef =</span> <span class="fu">coef</span>(reg_2s)[<span class="dv">2</span>]</span>
<span id="cb91-21"><a href="variáveis-instrumentais.html#cb91-21" tabindex="-1"></a>  )</span>
<span id="cb91-22"><a href="variáveis-instrumentais.html#cb91-22" tabindex="-1"></a>}</span>
<span id="cb91-23"><a href="variáveis-instrumentais.html#cb91-23" tabindex="-1"></a></span>
<span id="cb91-24"><a href="variáveis-instrumentais.html#cb91-24" tabindex="-1"></a></span>
<span id="cb91-25"><a href="variáveis-instrumentais.html#cb91-25" tabindex="-1"></a><span class="co"># Sample sizes to simulate</span></span>
<span id="cb91-26"><a href="variáveis-instrumentais.html#cb91-26" tabindex="-1"></a>sample_sizes <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1000</span>, <span class="dv">100000</span>, <span class="at">by =</span> <span class="dv">1000</span>)</span>
<span id="cb91-27"><a href="variáveis-instrumentais.html#cb91-27" tabindex="-1"></a></span>
<span id="cb91-28"><a href="variáveis-instrumentais.html#cb91-28" tabindex="-1"></a><span class="co"># Use map to apply the function to each sample size</span></span>
<span id="cb91-29"><a href="variáveis-instrumentais.html#cb91-29" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">sample_size =</span> sample_sizes) <span class="sc">%&gt;%</span></span>
<span id="cb91-30"><a href="variáveis-instrumentais.html#cb91-30" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb91-31"><a href="variáveis-instrumentais.html#cb91-31" tabindex="-1"></a>    <span class="at">simulation_results =</span> <span class="fu">map</span>(sample_size, simulate_and_fit)</span>
<span id="cb91-32"><a href="variáveis-instrumentais.html#cb91-32" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb91-33"><a href="variáveis-instrumentais.html#cb91-33" tabindex="-1"></a>  <span class="fu">unnest</span>(<span class="at">cols =</span> <span class="fu">c</span>(simulation_results))</span>
<span id="cb91-34"><a href="variáveis-instrumentais.html#cb91-34" tabindex="-1"></a></span>
<span id="cb91-35"><a href="variáveis-instrumentais.html#cb91-35" tabindex="-1"></a>results <span class="sc">%&gt;%</span></span>
<span id="cb91-36"><a href="variáveis-instrumentais.html#cb91-36" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(naive_coef, tsls_coef), <span class="at">names_to =</span> <span class="st">&quot;method&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;coefficient&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb91-37"><a href="variáveis-instrumentais.html#cb91-37" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> sample_size, <span class="at">y =</span> coefficient, <span class="at">color =</span> method)) <span class="sc">+</span></span>
<span id="cb91-38"><a href="variáveis-instrumentais.html#cb91-38" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb91-39"><a href="variáveis-instrumentais.html#cb91-39" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">filter</span>(method <span class="sc">==</span> <span class="st">&quot;2sls_coef&quot;</span>), <span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb91-40"><a href="variáveis-instrumentais.html#cb91-40" tabindex="-1"></a></span>
<span id="cb91-41"><a href="variáveis-instrumentais.html#cb91-41" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb91-42"><a href="variáveis-instrumentais.html#cb91-42" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Convergence of Regression Coefficients with Increasing Sample Size&quot;</span>,</span>
<span id="cb91-43"><a href="variáveis-instrumentais.html#cb91-43" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;Sample Size&quot;</span>,</span>
<span id="cb91-44"><a href="variáveis-instrumentais.html#cb91-44" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;Estimated Coefficient&quot;</span>,</span>
<span id="cb91-45"><a href="variáveis-instrumentais.html#cb91-45" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;Method&quot;</span></span>
<span id="cb91-46"><a href="variáveis-instrumentais.html#cb91-46" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb91-47"><a href="variáveis-instrumentais.html#cb91-47" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb91-48"><a href="variáveis-instrumentais.html#cb91-48" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;naive_coef&quot;</span> <span class="ot">=</span> <span class="st">&quot;blue&quot;</span>, <span class="st">&quot;tsls_coef&quot;</span> <span class="ot">=</span> <span class="st">&quot;red&quot;</span>)) <span class="sc">+</span></span>
<span id="cb91-49"><a href="variáveis-instrumentais.html#cb91-49" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb91-50"><a href="variáveis-instrumentais.html#cb91-50" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb91-51"><a href="variáveis-instrumentais.html#cb91-51" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_blank</span>()</span>
<span id="cb91-52"><a href="variáveis-instrumentais.html#cb91-52" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/sim-dag-canonico-n-1.png" width="672" /></p>
</div>
<div id="principais-usos-de-iv" class="section level2 hasAnchor" number="6.4">
<h2><span class="header-section-number">6.4</span> Principais usos de IV<a href="variáveis-instrumentais.html#principais-usos-de-iv" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="experimentos-1" class="section level3 hasAnchor" number="6.4.1">
<h3><span class="header-section-number">6.4.1</span> Experimentos<a href="variáveis-instrumentais.html#experimentos-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Quando pesquisadores utilizam o processo de assignment como instrumento para lidar com problema de non-compliance. Estimativas do Local Average Treatment Effect são críveis. Contraposição a intent-to-treat estimates.</p>
</div>
<div id="regras-com-variação-quasi-aleatória" class="section level3 hasAnchor" number="6.4.2">
<h3><span class="header-section-number">6.4.2</span> Regras com variação quasi-aleatória<a href="variáveis-instrumentais.html#regras-com-variação-quasi-aleatória" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Kin (2019) utiliza uma regra na Suécia que obriga cidades com poplução acima de certo nível a adotar democracia direta. Dinas (2014) utiliza idade para votar no momento da eleição como instrumento para comparecimento eleitoral do eleitor.</p>
</div>
<div id="teoria" class="section level3 hasAnchor" number="6.4.3">
<h3><span class="header-section-number">6.4.3</span> Teoria<a href="variáveis-instrumentais.html#teoria" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Quando a restrição de exclusão é baseada em teoria ou conhecimento substantivo. Aqui estão os instrumentos baseados em geografia ou clima (por exemplo, proximidade a faculdade como instrumento para ensino superior) ou (Zhu, 2017) que usou proximidade geográfica de cinco centros comerciais fora da China (ponderados pelo PIB dos centros comerciais) como instrumento para presença de multinacional (que causaria corrupção). Há o clássico instrumento de chuva como instrumento para, por exemplo, comparecimento eleitoral de eleitores democratas.</p>
<p>Mellon (2023) revisou 289 estudos e concluiu que 195 variáveis distintas foram conectadas com chuva, o que significa que podem ser potenciais violações da restrição de exclusão.</p>
<p>Cinelli and Hazlett</p>
<p>Freidman et. al (2000) usaram origem legal (francesa, inglesa, sueca etc.) como instrumento para qualidade das instituições. Djankov et al. (2003) usaram origem legal como instrumento para grau de formalismo de instituições.</p>
<p>Glaeser et al. (2004) usaram origem legal como instrumento para restrições ao executivo (“executive constraints”).</p>
<p>Henderson and Brooks, 2016, usam chuva ao redor do dia da eleição como instrumento para votação de candidatos democratas, e concluem que aumento da chuva reduz comparecimento que causa democratas terem comportamento legislativo mais direitoso.</p>
<p>##Efeito heterogêneo</p>
<p>Se houver efeito heretogêneo (apenas mulheres mudam comportamento em razão do instrumento, por exemplo), então estamos estimando o efeito apenas para aquele subgrupo (são os compliers com o instrumento).</p>
<p>Se o instrumento explicar pouco da variação no Tratamento, então teremos pouca variação no tratamento para explicar a variação em Y. Ou seja, o sinal é fraco. Isso se traduz em baixo poder estatístico.</p>
<p>Para discutir efeito casual heterogêneo, vamos utilizar um estudo em ciência política (White, 2019). Qual o efeito de misdemeanor (algo como contravenção penal) sobre comparecimento eleitoral? O aturo argumenta que o efeito deve variar por raça (maior para negros que brancos), de modo que o efeito causla é heterogêneo. Segundo o autor, casos são atribuídos aleatoriamente para diferentes cortes judiciais, e elas variam em sua leniência (ou severidade). Aqui, o tratamento é a condenação (<span class="math inline">\(1\)</span> se condenado, <span class="math inline">\(0\)</span> se não), e temos uma variável instrumental, o sorteio do juiz mais ou menos leniente.</p>
<p>Alguns acusados têm tantas evidências que serão condenados não importa para que tipo de corte são enviados. Outros, podem sersempre absolvidos, não importa o juiz. Há os !azarados”, que só serão condenados se enviados para a corte severa. O que não faz sentido é ter alguém que só é condenado se enviado para um juiz leniente e absolvido se enviado para um severo.
Nós iremos agrupar esses quatro tipos (incluindo o último) em quatro tipos:</p>
<p>Os primeiros são chamado de always-takers. Sempre recebem o tratamento (são presos), não importa o que foi atribuído a eles pelo mecanismo de atribuição. O segundo são os never takers, que nunca recebem o tratamento. Por fim, o terceiro grupo são os compliers, que seguem o tratamernto prescrito e o quarto grupo são os defiers, aqueles que fazem o contrário do prescrito. Nesse caso, não faz muito sentido imaginar que existem os defiers, mas teoricamente é possível.</p>
<p>Digmos que o efeito causal do tratamento é heterogêneo, isto é, <span class="math inline">\(\delta_i = Y^1_i - Y^0_i\)</span>.</p>
<p>Nesse caso, não podemos mais estimar o efeito causal geral (ATE), pois o efeito causla é heterogêneo e o instrumento só explica a variação no tratamento para os compliers.</p>
</div>
<div id="suposições-para-estimar-o-late" class="section level3 hasAnchor" number="6.4.4">
<h3><span class="header-section-number">6.4.4</span> Suposições para estimar o LATE<a href="variáveis-instrumentais.html#suposições-para-estimar-o-late" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Além das suposições que já discutimos, vale sempre lembrar que temos também a SUTVA.</p>
<p>Resultados potenciais para unidade <span class="math inline">\(i\)</span> não estão relacionadas ao tratamento que <span class="math inline">\(j\)</span> recebe. Claramente existe potencial para SUTVA ser violada no estudo de encarceramento e voto. Se dois irmãos (indivíduo <span class="math inline">\(i\)</span> e <span class="math inline">\(j\)</span>) são acusados e um deles é preso, é possível que o tratamento de um deles impacte a probabilidade de voto do outro e vice-versa. Salvo engano, White não discute essa possibilidade de violação da suposição, o que é problemático. Mas vamos supor que SUTVA está garantido.</p>
<ol start="2" style="list-style-type: decimal">
<li>Vale lembrar também que Independência é diferetne da restrição de exclusão</li>
</ol>
<p>Também chamada de <em>as good as random assignment</em> e <em>no confounding for the effect of Z on Y</em>. Afirma que a IV é independente dos resultados potenciais e das potenciais atribuições de tratamento. Em termos de nosso DAG, quer dizer que <span class="math inline">\(Z\)</span> não compartilha causa comum com <span class="math inline">\(Y\)</span>.</p>
<p>Essa suposição parece tranquilamente satisfeita no estudo em questão, já que a atribuição da corte é aleatória e parece difícil imaginar que algo que causa a leniência da corte ser causado por alguma variável que também causa o comparecimento. Aqui o DAG:</p>
</div>
</div>
<div id="restrição-de-exclusão-1" class="section level2 hasAnchor" number="6.5">
<h2><span class="header-section-number">6.5</span> Restrição de Exclusão<a href="variáveis-instrumentais.html#restrição-de-exclusão-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
</div>
<div id="monoticidade" class="section level2 hasAnchor" number="6.6">
<h2><span class="header-section-number">6.6</span> Monoticidade<a href="variáveis-instrumentais.html#monoticidade" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Por fim, precisamos assumir monoticidade. Ela requer que a variável instrumental opera (fracamente) em todas as direções para todos os indivíduos. Ou seja, todo mundo que é afetado pelo instrumento é afetado da mesma maneira. Em outras palavras, o instrumento apenas move as pessoas do controle para o tratamento (ou não move a pessoa), mas nunca o contrário. Ou seja, estamos assumindo que não há defiers na nossa população.</p>
<p>Matematicamente e de maneira geral, dizemos que a monoticidade é válida quando <span class="math inline">\(T^{Z=1} &gt;= T^{Z=0}\)</span> para todas as unidades.</p>
<p>Com essas suposições, nós estiamos o LATE: Local Average Treatment Effect of T on Y. Isso porque nosso estimador é:</p>
<p><span class="math display">\[\begin{align}
  \mathbb{E}[Y(Z=1) - Y(Z=0)] = \\
  =&amp; \mathbb{E}[Y(Z=1) - Y_i(Z=0)|T^1 = 1, T^0 = 1]P(T^1 = 1, T^0 = 1) \text{ always-takers} \\
  +&amp; \mathbb{E}[Y(Z=1) - Y_i(Z=0)|T^1 = 0, T^0 = 0]P(T^1 = 0, T^0 = 0) \text{ never-takers} \\
  +&amp; \mathbb{E}[Y(Z=1) - Y_i(Z=0)|T^1 = 1, T^0 = 0]P(T^1 = 1, T^0 = 0) \text{ compliers} \\
  +&amp; \mathbb{E}[Y(Z=1) - Y_i(Z=0)|T^1 = 0, T^0 = 1]P(T^1 = 0, T^0 = 1) \text{ defiers}
\end{align}\]</span></p>
<p>Porém, sabemos que o instrumento não tem efeito causal sobre always-takers nem never-takers, então o efeito causal é zero para esses grupos. E a proporção de defiers é zero, de modo que ficamos apenas com a parte dos compliers. E nesse grupo, <span class="math inline">\(Z = T\)</span>, de modo que o efeito do instrumento é o efeito do tratamento. Então podemos reescrever como:</p>
<p><span class="math display">\[\delta_{IV,LATE} = \mathbb{E}[Y(1) - Y^0)|T^1 - T^0 = 1]\]</span></p>
<p>Vejam que o denominador nos dá a proporção da população que mudou seu status por causa do instrumento.</p>
</div>
<div id="estimação-aka-estatística-f" class="section level2 hasAnchor" number="6.7">
<h2><span class="header-section-number">6.7</span> Estimação (aka estatística F)<a href="variáveis-instrumentais.html#estimação-aka-estatística-f" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Considere nosso modelo em que as variáveis estão centradas (sem constante) e não há controle.</p>
<p><span class="math inline">\(y_i = \beta D_i + e_i\)</span>
<span class="math inline">\(D_i = \pi z_i + u_i\)</span></p>
<p>Posso reescrever a equação de resultado como:</p>
<p><span class="math inline">\(y_i = \beta (\pi z_i + u_i) + e_i =  \underbrace{\beta \pi}_{\delta} z_i + \beta u_i + e_i\)</span>
Essa equação é chamada de forma reduzida.</p>
<p>Lembrando que nosso estimador <span class="math inline">\(\hat{\beta}_{2sls} = \frac{\hat{\delta}}{\hat{\pi}}\)</span></p>
<p>Ou seja, o estimador de 2sls é a razão da forma reduzida e o primeiro estágio</p>
<p>O que acontece se <span class="math inline">\(Cov(D_i, z_i)\)</span> for muito pequeno? Pequenas variações podem impactar bastante as estimativas.</p>
<p>É possível mostrar (supondo homocedasticidade) como o viés do nosso estimaodr em dois estágio se releciona com a estatística F:</p>
<p><span class="math display">\[
\mathbb{E}[\hat{\beta_{2sls}} - \beta] \approx \underbrace{\frac{Cov(u,e)}{Var(u)}}_{\text{OVB}} \frac{k}{F + 1}
\]</span></p>
<p>Se a estatística F é zero, ou seja, o poder do teste é zero, então o viés é igual ao de MQO normal, ou seja, a estimativa com IV é a mesma de OLS/MQO.</p>
<p>Quanto maior a estatística F, menor o viés. E por fim, quanto maior o número de instrumentos (isso não está explícito, mas entra na fórmula), maior o viés em amostras finitas.</p>
<p>É por essa razão que a literatura se concentrou em uma heurística para a estatística F, que vimos é ser maior que 10. Que basicamente é dizer que será no máximo 10% do viés com 95% de certeza.</p>
<div id="f-stat" class="section level3 hasAnchor" number="6.7.1">
<h3><span class="header-section-number">6.7.1</span> F stat<a href="variáveis-instrumentais.html#f-stat" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A estatística F do primeiro estágio é a parcela explicada no primeiro estágio, relativo ao ruído no primeiro estágio. Quanto maior a estatística F, menor o viés.</p>
<p>Se o poder é zero, <span class="math inline">\(F = 0\)</span> e IV é apenas a estimativa de MQO.</p>
<p>Ponto chave: quando existem muitos instrumentos, o viés aumenta.</p>
<p>This is the approach initially developed by Staiger and Stock (1997) and Stock and Yogo (2005).
- Typical rule of thumb: first-stage F-statistic above 10 means that bias won’t be larger than 10% with size of 5%. Very popular!
- Suposição chave: homecedasticidade!</p>
<p>Montiel Olea and Pfluger( 2013) desenvolveram um teste robusto a heterocedasticidade, com uma estatística F mais apropriada a (allows for clustering, autocorrelation, etc.)
- O novo ponto de corte é mais como 23.1</p>
<p>O patoce ivDiag computa essa estatística F. Função eff_F.</p>
<p>Alternativa é computar um invervalo de confiança de Anderson-Rubin, que é válido mesmo com instrumento fraco. Novamente, ivDiag computa esse IC.</p>
</div>
</div>
<div id="referências-3" class="section level2 hasAnchor" number="6.8">
<h2><span class="header-section-number">6.8</span> Referências<a href="variáveis-instrumentais.html#referências-3" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Henderson, J., &amp; Brooks, J. (2016). Mediating the electoral connection: The information effects of voter signals on legislative behavior. The Journal of Politics, 78(3), 653-669.</p>
<p>Mellon, J. (2023). Rain, Rain, Go Away: 195 Potential Exclusion-Restriction Violations for Studies Using Weather as an Instrumental Variable. Available at SSRN 3715610.</p>
<p>White, A. (2019). Misdemeanor disenfranchisement? The demobilizing effects of brief jail spells on potential voters. American Political Science Review, 113(2), 311-324.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="propensity-score-e-matching.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="desenho-de-regresão-discontínua.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": "https://github.com/mgaldino/Causalidade/edit/main/06-VI.Rmd",
    "text": "Edit"
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": "https://github.com/mgaldino/Causalidade/blob/main/06-VI.Rmd",
    "text": null
  },
  "download": null,
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "subsection"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
