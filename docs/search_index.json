[["synthetic-control.html", "Capítulo 10 Synthetic Control 10.1 Implementação no R 10.2 Synthethic DiD 10.3 Referências", " Capítulo 10 Synthetic Control Vamos começar com um exemplo, já famoso na literatura, de Controle Sintético. O estado da Califórnia implmentou uma proibição de uso de cigarro e digamso que queremos ver o efeito dessa proibição, isto é, nosso estimando é \\(\\tau_{\\text{ban}, \\text{CA}} = Y(1)_{\\text{ban}, CA} - Y(0)_{\\text{ban}, \\text{CA}}\\). Como não observamos \\(Y(0)_{\\text{ban}, \\text{CA}}\\), temos de criar uma “Califórnia sintética”. Antigamente, iremos usar alguma média dos demais estados “não-tratados”para estimar o contrafactual. Contudo, não é muito convincente. state year cigsale retprice california after_treatment 1 1970 89.8 39.6 FALSE FALSE 1 1971 95.4 42.7 FALSE FALSE 1 1972 101.1 42.3 FALSE FALSE 1 1973 102.9 42.1 FALSE FALSE 1 1974 108.2 43.1 FALSE FALSE 1 1975 111.7 46.6 FALSE FALSE Suponha que obtivemos dados para \\(J+1\\) unidades para unidades \\(j = 1, 2, ..., J+1\\), e sem perda de generalidade, a primeira unidade \\(j=1\\) é a de tratamento ou sob intervenção. O grupo de unidades para comparação (donor pool) é dado por \\(j = 2, ..., J+1\\), uma coleção de unidade não-tratadas. Os dados são observados por \\(T\\) períodos \\(1, 2, ..., t_0, t_1, t_2, ..., T\\), em que de \\(1\\) até \\(t_0\\) nenhuma unidade foi tratada ou sofreu intervenção. Para cada unidade \\(j\\), observamos também um conjunto de \\(k\\) preditores, \\(X_{1j}, X_{2j}, ..., X_{kj}\\), que pode incluir vaores pré-intervenção da variável resposta \\(y_{jt}\\). A ideia é usar com combinação linear do donor pool, com pesos apropriados, para estimar o contrafactual, isto é, o resultado potencial dos tratados. Lembrando que o estimando usual de interesse é o ATT: \\[ \\mathbb{E}[Y(1)_{it}|D_{it}=1] - \\mathbb{E}[Y(0)_{it}|D_{it}=1] \\] A dificuldade, como sempre, é que não observamos \\(\\mathbb{E}[Y(0)_{it}|D_{it}=1\\). Estimar ou imputar esse missing data a partir de uma média ponderada é o objetivo de nosso estimador. A ideia é um pouco parecida com matching, em que nós pareávamos unidades de controle com as taratdas, minimizando a distância a partir das covariáveis. Aqui, vamos fazer algo parecido, mas com uma diferença chave: vamos incluir nas covariáveis a variável resposta defasada. Esse método foi introduzido por Abadie et. al em um journal de ciência política. Vamos usar a abordagem de Doudchenko e Imbens (2018) para apresentar o médo, pois vai faciliar a introdução posterior de diferença em diferenças sintéticas. Nossos dados podem ser organizados da seguinte forma: 10.0.1 Tratamento Suponha, como no caso da proposição 99, que temos uma unidade tratada e o tratamento é absorvente. O banco de dado para o tratamento pode ser representado como: \\[\\begin{aligned} D \\;=\\; \\begin{bmatrix} 0 &amp; 0 &amp; 0 &amp; \\cdots 0 &amp; 0\\\\ 0 &amp; 0 &amp; 0 &amp; \\cdots 0 &amp; 0\\\\ \\vdots \\\\ 0 &amp; 0 &amp; 0 &amp; \\cdots 0 &amp; 1\\\\ 0 &amp; 0 &amp; 0 &amp; \\cdots 0 &amp; 1\\\\ \\end{bmatrix} \\end{aligned}\\] Aqui, o estados estão nas colunas, Calinfórnia é a última coluna, e nas linhas temos os períodos de tempo. E podemos simplificar a matriz acima para apenas quatro blocos: \\[\\begin{aligned} D \\;=\\; \\begin{pmatrix} \\mathbf{0} &amp; \\mathbf{0} \\\\ \\mathbf{0} &amp; \\mathbf{1} \\end{pmatrix} \\end{aligned}\\] O que nos leva à seuinge matriz de resultados: \\[\\begin{aligned} Y \\;=\\; \\begin{pmatrix} \\mathbf{Y_{co, pre}} &amp; \\mathbf{Y_{tr, pre}} \\\\ \\mathbf{Y_{co, post}} &amp; \\mathbf{Y_{tr, post}} \\end{pmatrix} \\;=\\; \\begin{pmatrix} Y_{co, pre}(0) &amp; Y_{tr, pre}(0) \\\\ Y_{co, post}(0) &amp; Y_{tr, post}(1) \\end{pmatrix} \\end{aligned}\\] E de maneira similar para as covariáveis, mas vamos simplificar e supor que não temos nenhuma, sem perda de generalidade. Relembrando, nosso estimando é dado por: \\[ \\mathbb{E}[Y(1)_{it}|D_{it}=1] - \\mathbb{E}[Y(0)_{it}|D_{it}=1] \\] E preciso para isso estimar \\(\\mathbb{E}[Y(0)_{it}|D_{it}=1]\\), em nossa nova notação: \\(Y(0)_{it}|D_{it}=1 \\text{, p/ todo t} &gt; t_0 = Y_{tr, post}(0)\\). E nosso estimador será: \\[ Y_{tr, post}(0) = \\mu + \\sum_{i \\in co}w_iY_{i,t} \\] Em que \\(w_i\\) são os pesos do donor pool. Em ADH (2010), as restrições são: \\(\\mu = 0\\) \\(\\sum_i w_i = 1\\) \\(w_i \\geq 0 \\text{, } \\forall i\\) Restrição 1 signifca que não há diferença de nível. Suposição 2 significa que o contrafactual tem de ser contruído no suporte do donor pool. Suposição 3 A intuição para o cálculo do peso é parecida da regressão linear, em que estamos minimizando a soma da distância. A diferença é que é uma soma diferente. \\[ ||\\mathbf{X}_{tr} - \\mathbf{X}_{co}\\mathbf{W}|| \\] Lembrando que vamos incluir a VD defasada em \\(X\\). Vamos para o R para ver isso em ação. Dica: Há vários pacotes, mas o original, synth, é muito complexdo de usar e não recomendamos. augsynth/tidysynth and synthdid packages (original package is tough to use) 10.1 Implementação no R # tidysynth library(tidysynth) library(tidyverse) data(smoking) smoking %&gt;% head() %&gt;% kable() state year cigsale lnincome beer age15to24 retprice Rhode Island 1970 123.9 NA NA 0.1831579 39.3 Tennessee 1970 99.8 NA NA 0.1780438 39.9 Indiana 1970 134.6 NA NA 0.1765159 30.6 Nevada 1970 189.5 NA NA 0.1615542 38.9 Louisiana 1970 115.9 NA NA 0.1851852 34.3 Oklahoma 1970 108.4 NA NA 0.1754592 38.4 smoking_out &lt;- smoking %&gt;% # initial the synthetic control object synthetic_control(outcome = cigsale, # outcome unit = state, # unit index in the panel data time = year, # time index in the panel data i_unit = &quot;California&quot;, # unit where the intervention occurred i_time = 1988, # time period when the intervention occurred generate_placebos=T # generate placebo synthetic controls (for inference) ) %&gt;% # Generate the aggregate predictors used to fit the weights # average log income, retail price of cigarettes, and proportion of the # population between 15 and 24 years of age from 1980 - 1988 generate_predictor(time_window = 1980:1988, ln_income = mean(lnincome, na.rm = T), ret_price = mean(retprice, na.rm = T), youth = mean(age15to24, na.rm = T)) %&gt;% # average beer consumption in the donor pool from 1984 - 1988 generate_predictor(time_window = 1984:1988, beer_sales = mean(beer, na.rm = T)) %&gt;% # Lagged cigarette sales generate_predictor(time_window = 1975, cigsale_1975 = cigsale) %&gt;% generate_predictor(time_window = 1980, cigsale_1980 = cigsale) %&gt;% generate_predictor(time_window = 1988, cigsale_1988 = cigsale) %&gt;% # Generate the fitted weights for the synthetic control generate_weights(optimization_window = 1970:1988, # time to use in the optimization task margin_ipop = .02,sigf_ipop = 7,bound_ipop = 6 # optimizer options ) %&gt;% # Generate the synthetic control generate_control() # série do observado e controle sintético smoking_out %&gt;% plot_trends(time_window = 1970:2000) A quantidade causal de interesse pode ser visualizada do seguinte modo: smoking_out %&gt;% plot_differences() E é possível visulizar os pesos de cada unidade e das variáveis: smoking_out %&gt;% plot_weights() Podemos também olhar o balanceamento entre o observado e o sintético: smoking_out %&gt;% grab_balance_table() ## # A tibble: 7 × 4 ## variable California synthetic_California donor_sample ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 ln_income 10.1 9.85 9.83 ## 2 ret_price 89.4 89.4 87.3 ## 3 youth 0.174 0.174 0.173 ## 4 beer_sales 24.3 24.2 23.7 ## 5 cigsale_1975 127. 127. 137. ## 6 cigsale_1980 120. 120. 138. ## 7 cigsale_1988 90.1 91.4 114. A Inferência é complicada. O método tradicional é o chamado teste placebo, cuja intuição é a de um teste de permutação, ou seja, a gente diz que um outro estado foi tratado (NY, por exemplo), e roda o modelo de novo e assim por diante para todas as unidades do donor pool. O gráfico abaixo traz isso pronto. smoking_out %&gt;% plot_placebos() 10.2 Synthethic DiD Synth DiD comebinar controle sintético com DiD, em algo novo. Então, vamos começar revisitando DiD. Nós vimos que o estimador de DiD é equivalente a uma regressão linear com efeitos fixos de unidade e tempo. Vamos aplicar nosso estimador para os dados da da proposição 99. library(fixest) smoking_did &lt;- smoking %&gt;% mutate(treatment = ifelse(state == &quot;California&quot; &amp; year &gt; 1988, 1, 0)) did &lt;- feols(cigsale ~ treatment | state + year, data = smoking_did) etable(did) ## did ## Dependent Var.: cigsale ## ## treatment -27.35*** (2.802) ## Fixed-Effects: ----------------- ## state Yes ## year Yes ## _______________ _________________ ## S.E.: Clustered by: state ## Observations 1,209 ## R2 0.87764 ## Within R2 0.03267 ## --- ## Signif. codes: 0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1 O problema dessa. estimativa é que a suposição de tendências paralelas na média não é muito crível. df &lt;- smoking_did %&gt;% mutate(event_time = year - 1988, id = as.integer(as.factor(state))) %&gt;% group_by(state) %&gt;% mutate(g = ifelse(state == &quot;California&quot; &amp; year &gt;= 1988, 1988, 0)) # Estimação do modelo event study # model_feols &lt;- feols( # cigsale ~ i(event_time, ref = -1) | unidade + periodo, # data = df) library(did2s) out_es &lt;- event_study( data = df, idname = &quot;id&quot;, tname = &quot;year&quot;, gname = &quot;g&quot;, # coluna que indica o período de tratamento para cada i yname = &quot;cigsale&quot;, estimator = &quot;all&quot; ) ## Error in max(t) : invalid &#39;type&#39; (list) of argument ## Error in fixest::feols(sunab_formla, data = data) : ## Evaluation of the right-hand-side of the formula raises an error: ## in i(factor_var = period, f2 = cohort, f_n...: ## Argument `factor_var` must be a vector. Problem: it is of length 0, while ## it should have a positive length. ## Error in create_Atheta_list_for_event_study(eventTime = eventTime, g_list = g_list, : ## There are no comparison cohorts for the given eventTime plot_event_study(out_es) E se a gente combinasse controle sintético com DiD, isto é, usasse peso para criar tendências paralelas, e então aplicasse DiD? Arkhangelsky et al (2021) mostraram que podemos reescrever o estimador de controle sintético como: \\[ (\\hat{\\mu}, \\hat{\\gamma}, \\hat{\\tau}) = \\text{arg}\\,\\max\\limits_{\\mu, \\gamma, \\tau}\\ \\sum_i \\sum_t (y_{it}) - \\mu - \\gamma_t -D_{it}\\tau)^2\\hat{w}_i \\] Já o DiD é dado por: \\[ (\\hat{\\mu}, \\hat{\\alpha}, \\hat{\\gamma}, \\hat{\\tau}) = \\text{arg}\\,\\max\\limits_{\\mu, \\gamma, \\tau}\\ \\sum_i \\sum_t (y_{it}) - \\mu - \\alpha_i - \\gamma_t -D_{it}\\tau)^2 \\] A a proposta dos autores, o Synthetic DiD é dada pelo estimador: \\[ (\\hat{\\mu}, \\hat{\\alpha}, \\hat{\\gamma}, \\hat{\\tau}) = \\text{arg}\\,\\max\\limits_{\\mu, \\gamma, \\tau}\\ \\sum_i \\sum_t (y_{it}) - \\mu - \\alpha_i - \\gamma_t -D_{it}\\tau)^2\\hat{w}_i\\hat{\\lambda}_t \\] Como antes, \\(\\hat{w}_\\) são pesos para cada unidade que procuram balancear a tendência pré-exposição ao tratamento nos grupos controle e de tratamento (no exemplo, demais estados e Califórnia). E introduzem pesos \\(\\hat{\\lambda}_t\\) para os períodos de tempo \\(t\\) que procuram balancear os períodos pré-exposição com os períodos pós-exposição. Contrast o SDiD com o DiD, e a didferença são os dois pesos. Basicamente, estamos estimando regressão linear local ao colocar mais peso em unidades que são, em média, mais similares aos tratados no período pré-exposição e enfatiza períodos mais similares ao algo (período tratado). Em outras palavras, “Time weights are designed so that the average post-treatment outcome for each of the control units differs by a constant from the weighted average of the pre-treatment outcomes for the same control units”(p. 4) Esse estimador relaxa a suposição de tendências paralelas. Agora, precisamos que um fator latente seja paralelo. # devtools::install_github(&quot;synth-inference/synthdid&quot;) library(synthdid) estimators = list(did=did_estimate, sc=sc_estimate, sdid=synthdid_estimate) str(synthdid_estimate) ## function (Y, N0, T0, X = array(dim = c(dim(Y), 0)), noise.level = sd(apply(Y[1:N0, ## 1:T0], 1, diff)), eta.omega = ((nrow(Y) - N0) * (ncol(Y) - T0))^(1/4), ## eta.lambda = 1e-06, zeta.omega = eta.omega * noise.level, zeta.lambda = eta.lambda * ## noise.level, omega.intercept = TRUE, lambda.intercept = TRUE, weights = list(omega = NULL, ## lambda = NULL), update.omega = is.null(weights$omega), update.lambda = is.null(weights$lambda), ## min.decrease = 1e-05 * noise.level, max.iter = 10000, sparsify = sparsify_function, ## max.iter.pre.sparsify = 100) # converte para matriz df_sdid &lt;- df %&gt;% dplyr::select(state, year, cigsale, treatment) %&gt;% mutate(treatment = as.integer(treatment), year = as.integer(year), state = as.factor(state)) %&gt;% as.data.frame() # aparentemente panel.matrices não funciona com tibble setup &lt;- panel.matrices(df_sdid) head(setup) %&gt;% kable() 1970 1971 1972 1973 1974 1975 1976 1977 1978 1979 1980 1981 1982 1983 1984 1985 1986 1987 1988 1989 1990 1991 1992 1993 1994 1995 1996 1997 1998 1999 2000 Alabama 89.8 95.4 101.1 102.9 108.2 111.7 116.2 117.1 123.0 121.4 123.2 119.6 119.1 116.3 113.0 114.5 116.3 114.0 112.1 105.6 108.6 107.9 109.1 108.5 107.1 102.6 101.4 104.9 106.2 100.7 96.2 Arkansas 100.3 104.1 103.9 108.0 109.7 114.8 119.1 122.6 127.3 126.5 131.8 128.7 127.4 128.0 123.1 125.8 126.0 122.3 121.5 118.3 113.1 116.8 126.0 113.8 108.8 113.0 110.7 108.7 109.5 104.8 99.4 Colorado 124.8 125.5 134.3 137.9 132.8 131.0 134.2 132.0 129.2 131.5 131.0 133.8 130.5 125.3 119.7 112.4 109.9 102.4 94.6 88.8 87.4 90.2 88.3 88.6 89.1 85.4 83.1 81.3 81.2 79.6 73.0 Connecticut 120.0 117.6 110.8 109.3 112.4 110.2 113.4 117.3 117.5 117.4 118.0 116.4 114.7 114.1 112.5 111.0 108.5 109.0 104.8 100.6 91.5 86.7 83.5 79.1 76.6 79.3 76.0 75.9 75.5 73.4 71.4 Delaware 155.0 161.1 156.3 154.7 151.3 147.6 153.0 153.3 155.5 150.2 150.5 152.6 154.1 149.6 144.0 144.5 142.4 141.0 137.1 131.7 127.2 118.8 120.0 123.8 126.1 127.2 128.3 124.1 132.8 139.5 140.7 Georgia 109.9 115.7 117.0 119.8 123.7 122.9 125.9 127.9 130.6 131.0 134.0 131.7 131.2 128.6 126.3 128.8 129.0 129.3 124.1 117.1 113.8 109.6 109.2 109.2 107.8 100.3 102.7 100.6 100.5 97.1 88.4 Idaho 102.4 108.5 126.1 121.8 125.6 123.3 125.1 125.0 122.8 117.5 115.2 114.1 111.5 111.3 103.6 100.7 96.7 95.0 84.5 78.4 90.1 85.4 85.1 86.7 93.0 78.2 73.6 75.0 78.9 75.1 66.9 Illinois 124.8 125.6 126.6 124.4 131.9 131.8 134.4 134.0 136.7 135.3 135.2 133.0 130.7 127.9 124.0 121.6 118.2 109.5 107.6 104.6 94.1 96.1 94.8 94.6 85.7 84.3 81.8 79.6 80.3 72.2 70.0 Indiana 134.6 139.3 149.2 156.0 159.6 162.4 166.6 173.0 150.9 148.9 146.9 148.5 147.7 143.0 137.8 135.3 137.6 134.0 134.0 132.5 128.3 127.2 128.2 126.8 128.2 135.4 135.1 135.3 135.9 133.3 125.5 Iowa 108.5 108.4 109.4 110.6 116.1 120.5 124.4 125.5 127.1 124.2 124.6 132.9 116.2 115.6 111.2 109.4 104.1 101.1 100.2 94.4 95.4 97.1 95.2 92.5 93.4 93.0 94.0 93.9 94.0 91.7 88.9 Kansas 114.0 102.8 111.0 115.2 118.6 123.4 127.7 127.9 127.1 126.4 127.1 132.0 130.9 127.6 121.7 115.7 109.4 105.2 103.2 96.5 94.3 91.8 90.0 89.9 89.1 90.1 88.7 89.2 87.6 83.3 79.8 Kentucky 155.8 163.5 179.4 201.9 212.4 223.0 230.9 229.4 224.7 214.9 215.3 209.7 210.6 201.1 183.2 182.4 179.8 171.2 173.2 171.6 182.5 170.4 167.6 167.6 170.1 175.3 179.0 186.8 171.3 165.3 156.2 Louisiana 115.9 119.8 125.3 126.7 129.9 133.6 139.6 140.0 142.7 140.1 143.8 144.0 143.9 133.7 128.9 125.0 121.2 116.5 110.9 103.6 101.5 107.2 108.5 106.2 105.3 105.7 106.8 105.3 103.2 101.0 104.3 Maine 128.5 133.2 136.5 138.0 142.1 140.7 144.9 145.6 143.9 138.5 141.2 138.9 139.5 135.4 135.5 127.9 119.0 125.0 125.0 122.4 117.5 116.1 114.5 108.5 101.6 102.3 100.0 101.1 94.5 85.5 82.9 Minnesota 104.3 116.4 96.8 106.8 110.6 111.5 116.7 117.2 118.9 118.3 117.7 120.8 119.4 113.2 110.8 113.0 104.3 108.8 94.1 92.3 90.7 86.2 83.8 81.6 83.4 84.1 81.7 84.1 83.2 80.7 76.0 Mississippi 93.4 105.4 112.1 115.0 117.1 116.8 120.9 122.1 124.9 123.9 127.0 125.3 125.8 122.3 116.4 115.3 113.2 110.0 109.0 108.3 101.8 105.6 103.9 105.4 106.0 107.5 106.9 106.3 107.0 103.9 97.2 Missouri 121.3 127.6 130.0 132.1 135.4 135.6 139.5 140.8 141.8 140.2 142.1 140.5 139.7 134.1 130.0 129.2 128.8 128.7 127.4 122.8 119.1 119.9 122.3 121.6 119.4 124.0 124.1 120.6 120.1 118.0 113.8 Montana 111.2 115.6 122.2 119.9 121.9 123.7 124.9 127.0 127.2 120.3 122.0 121.1 122.4 113.7 110.1 103.6 97.8 91.7 87.1 86.2 84.7 82.9 86.6 86.0 88.2 90.5 87.3 88.9 89.1 82.6 75.5 Nebraska 108.1 108.6 104.9 106.6 110.5 114.1 118.1 117.7 117.4 116.1 116.3 117.0 117.1 110.8 107.7 105.1 103.1 101.3 92.9 93.8 89.9 92.4 90.6 91.1 85.9 88.5 86.2 85.5 83.1 86.6 77.6 Nevada 189.5 190.5 198.6 201.5 204.7 205.2 201.4 190.8 187.0 183.3 177.7 171.9 165.1 159.2 136.6 146.7 142.6 147.7 141.9 137.9 137.3 115.5 110.0 108.1 105.2 100.9 99.0 95.6 102.4 103.9 93.2 New Hampshire 265.7 278.0 296.2 279.0 269.8 269.1 290.5 278.8 269.6 254.6 247.8 245.4 239.8 232.9 215.1 201.1 195.9 195.1 180.4 172.9 152.4 144.8 143.7 148.9 153.8 158.5 158.0 174.4 173.8 171.7 147.3 New Mexico 90.0 92.6 99.3 98.9 100.3 103.1 102.4 102.4 103.1 101.0 102.7 103.0 97.5 96.3 88.9 88.0 88.2 82.3 77.7 74.4 70.8 69.9 71.4 69.0 68.2 67.0 65.7 61.8 62.6 59.7 53.8 North Carolina 172.4 187.6 214.1 226.5 227.3 226.0 230.2 217.0 205.5 197.3 187.8 179.3 179.0 169.8 160.6 156.3 154.4 150.5 146.0 139.3 133.7 132.7 128.9 129.7 112.7 124.9 129.7 125.6 126.0 113.1 109.0 North Dakota 93.8 98.5 103.8 108.7 110.5 117.9 125.4 122.2 121.9 121.3 123.7 125.7 126.8 119.6 109.4 103.2 99.8 92.3 87.1 84.1 77.1 85.2 74.3 83.0 81.0 80.6 80.8 77.5 79.1 74.7 72.5 Ohio 121.6 124.6 124.4 120.5 122.1 122.5 124.6 127.3 131.3 130.9 133.5 132.8 134.0 130.0 127.1 126.7 126.3 124.6 122.4 118.6 115.5 113.2 112.3 108.9 108.6 111.7 107.6 108.6 106.4 104.0 99.9 Oklahoma 108.4 115.4 121.7 124.1 130.5 132.9 138.6 140.4 143.6 141.6 141.6 143.7 147.0 140.0 128.1 124.2 119.9 113.1 103.6 97.5 88.4 87.8 86.3 86.2 104.8 109.5 110.8 111.8 112.2 111.4 108.9 Pennsylvania 107.3 106.3 109.0 110.7 114.2 114.6 118.8 120.1 122.3 122.6 124.0 125.2 123.3 125.3 115.3 115.8 113.9 110.6 107.6 107.1 101.3 102.5 96.2 94.7 95.4 95.4 93.3 92.9 92.1 91.1 87.9 Rhode Island 123.9 123.2 134.4 142.0 146.1 154.7 150.2 148.8 146.8 145.8 149.3 151.2 146.3 135.8 136.9 133.4 136.3 124.4 138.0 120.8 101.4 103.6 100.1 94.1 91.9 90.8 87.5 90.0 88.7 86.9 83.1 South Carolina 103.6 115.0 118.7 125.5 129.7 130.5 136.8 137.2 140.4 135.7 138.3 136.1 136.0 131.1 127.0 125.4 126.6 126.6 124.4 122.4 118.6 121.5 112.8 115.2 112.2 109.2 102.9 124.5 126.9 109.4 103.9 South Dakota 92.7 96.7 103.0 103.5 108.4 113.5 116.7 115.6 116.9 117.4 114.7 115.7 113.0 109.8 105.7 104.4 97.0 95.8 91.9 87.4 88.3 91.8 93.0 91.6 94.8 98.6 92.3 88.8 88.3 83.5 75.1 Tennessee 99.8 106.3 111.5 109.7 114.8 117.4 121.7 124.6 127.3 127.2 130.4 129.1 131.4 129.0 125.1 128.7 129.0 130.6 125.3 124.7 121.8 120.6 121.0 120.8 118.8 125.4 119.2 118.9 119.7 115.6 108.7 Texas 106.4 108.9 108.6 110.4 114.7 116.0 121.4 124.2 126.6 126.4 129.7 129.0 131.2 126.4 117.2 115.9 113.7 105.8 96.5 94.5 85.6 79.4 77.2 81.3 78.8 75.2 74.6 72.6 73.2 67.6 69.3 Utah 65.5 67.7 71.3 72.7 75.6 75.8 77.9 78.0 79.6 79.1 74.8 77.6 73.6 69.0 66.3 66.5 64.4 67.7 55.0 57.0 53.4 53.5 55.0 56.2 55.8 52.0 54.0 57.0 42.3 43.9 40.7 Vermont 122.6 124.4 138.0 146.8 151.8 155.5 171.1 169.4 162.4 160.9 161.6 163.8 162.3 153.8 144.3 144.5 131.2 128.3 128.7 120.9 124.3 120.9 126.5 117.2 120.3 123.2 102.5 97.7 97.0 94.1 88.9 Virginia 124.3 128.4 137.0 143.1 149.6 152.7 158.1 157.7 155.9 151.8 148.9 149.9 147.4 144.7 136.8 134.6 135.8 133.0 129.5 122.5 118.9 109.1 108.2 105.4 106.2 106.7 104.6 108.0 105.6 102.1 96.7 West Virginia 114.5 111.5 117.5 116.6 119.9 123.2 129.7 133.9 131.6 122.1 122.3 120.5 119.8 115.7 111.9 109.1 112.1 107.5 109.1 104.0 104.1 100.1 97.9 111.0 104.2 115.2 112.7 114.5 114.6 112.4 107.9 Wisconsin 106.4 105.4 108.8 109.5 111.8 113.5 115.4 117.2 116.7 117.1 117.6 119.9 115.6 106.3 105.6 107.0 105.4 106.0 102.6 100.3 94.0 95.5 96.2 91.2 91.8 93.5 92.1 91.9 88.7 84.4 80.1 Wyoming 132.2 131.7 140.0 141.2 145.8 160.7 161.5 160.4 160.3 168.6 158.1 163.1 157.7 141.2 128.9 125.7 124.8 110.4 114.3 111.4 96.9 109.1 110.8 108.4 111.2 115.0 110.3 108.8 102.9 104.8 90.5 California 123.0 121.0 123.5 124.4 126.7 127.1 128.0 126.4 126.1 121.9 120.2 118.6 115.4 110.8 104.8 102.8 99.7 97.5 90.1 82.4 77.8 68.7 67.5 63.4 58.6 56.4 54.5 53.8 52.3 47.2 41.6 x 38 x 19 1970 1971 1972 1973 1974 1975 1976 1977 1978 1979 1980 1981 1982 1983 1984 1985 1986 1987 1988 1989 1990 1991 1992 1993 1994 1995 1996 1997 1998 1999 2000 Alabama 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 Arkansas 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 Colorado 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 Connecticut 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 Delaware 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 Georgia 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 Idaho 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 Illinois 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 Indiana 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 Iowa 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 Kansas 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 Kentucky 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 Louisiana 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 Maine 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 Minnesota 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 Mississippi 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 Missouri 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 Montana 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 Nebraska 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 Nevada 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 New Hampshire 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 New Mexico 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 North Carolina 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 North Dakota 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 Ohio 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 Oklahoma 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 Pennsylvania 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 Rhode Island 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 South Carolina 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 South Dakota 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 Tennessee 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 Texas 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 Utah 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 Vermont 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 Virginia 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 West Virginia 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 Wisconsin 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 Wyoming 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 California 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 estimates &lt;- lapply(estimators, function(estimator) { estimator(setup$Y, setup$N0, setup$T0) } ) head(estimates) ## $did ## synthdid: -27.349 +- NA. Effective N0/N0 = 38.0/38~1.0. Effective T0/T0 = 19.0/19~1.0. N1,T1 = 1,12. ## ## $sc ## synthdid: -19.620 +- NA. Effective N0/N0 = 3.8/38~0.1. Effective T0/T0 = Inf/19~Inf. N1,T1 = 1,12. ## ## $sdid ## synthdid: -15.604 +- NA. Effective N0/N0 = 16.4/38~0.4. Effective T0/T0 = 2.8/19~0.1. N1,T1 = 1,12. standard.errors = mapply(function(estimate, name) { set.seed(12345) if(name == &#39;mc&#39;) { mc_placebo_se(setup$Y, setup$N0, setup$T0) } else { sqrt(vcov(estimate, method=&#39;placebo&#39;)) } }, estimates, names(estimators)) head(standard.errors) ## did sc sdid ## 17.740267 9.917426 8.367993 Plot comparando as estimativas. synthdid_plot(estimates[1:3], facet.vertical=FALSE, control.name=&#39;control&#39;, treated.name=&#39;california&#39;, lambda.comparable=TRUE, se.method = &#39;none&#39;, trajectory.linetype = 1, line.width=.75, effect.curvature=-.4, trajectory.alpha=.7, effect.alpha=.7, diagram.alpha=1, onset.alpha=.7) + theme(legend.position=c(.26,.07), legend.direction=&#39;horizontal&#39;, legend.key=element_blank(), legend.background=element_blank(), strip.background=element_blank(), strip.text.x = element_blank()) Plot comparando os pesos. synthdid_units_plot(rev(estimates[1:3]), se.method=&#39;none&#39;) 10.3 Referências Alcocer, J. J. (2025). Minority Legislators Sponsor and Cosponsor Differently from White Legislators: Causal Evidence from U.S. Congress. The Journal of Race, Ethnicity, and Politics, 1–13. doi:10.1017/rep.2025.29 Arkhangelsky, D., Athey, S., Hirshberg, D. A., Imbens, G. W., &amp; Wager, S. (2021). Synthetic difference-in-differences. American Economic Review, 111(12), 4088-4118. Arkhangelsky, D., &amp; Imbens, G. (2024). Causal models for longitudinal and panel data: A survey. The Econometrics Journal, 27(3), C1-C61. "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
